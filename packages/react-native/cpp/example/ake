#!/usr/bin/env nu

# Downoad onnxruntime from https://github.com/microsoft/onnxruntime/releases
# brew install opencv
# libavcodec.60.dylib not found: brew reinstall ffmpeg@6
# OpenCV not found: brew resinstall opencv

def main [] {}

def 'main start' [path?: string = './assets/cn-01.jpg'] {
  mkdir build
  cd build
  cmake ..  
  make
  cd ..
  main run $path
}

def 'main run' [path: string] {
  ./build/ocr_example $path
}

def 'main start watch' [] {
  # chokidar run_onnx* ../run_onnx* -c './ake start' --initial 
  chokidar *.cc *.h CMakeLists.txt -c './ake start' --initial 
}
